local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local Window = OrionLib:MakeWindow({Name = "Infinity X Hub", HidePremium = false, SaveConfig = true, ConfigFolder = "Infinity"})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local flying = false
local BodyGyro, BodyVelocity
local defaultWalkSpeed = 16
local defaultJumpPower = 50
local spinSpeed = 0

local function Fly()
    BodyGyro = Instance.new("BodyGyro")
    BodyVelocity = Instance.new("BodyVelocity")

    BodyGyro.P = 9e4
    BodyGyro.maxTorque = Vector3.new(9e9, 9e9, 9e9)
    BodyGyro.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame

    BodyVelocity.Velocity = Vector3.new(0, 0, 0)
    BodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)

    BodyGyro.Parent = LocalPlayer.Character.HumanoidRootPart
    BodyVelocity.Parent = LocalPlayer.Character.HumanoidRootPart

    flying = true
    LocalPlayer.Character.Humanoid.PlatformStand = true

    while flying do
        game:GetService("RunService").Heartbeat:Wait()
        BodyGyro.CFrame = workspace.CurrentCamera.CFrame

        local moveDirection = Vector3.new(0, 0, 0)
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.W) then
            moveDirection = moveDirection + workspace.CurrentCamera.CFrame.LookVector
        end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.S) then
            moveDirection = moveDirection - workspace.CurrentCamera.CFrame.LookVector
        end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.A) then
            moveDirection = moveDirection - workspace.CurrentCamera.CFrame.RightVector
        end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.D) then
            moveDirection = moveDirection + workspace.CurrentCamera.CFrame.RightVector
        end
        BodyVelocity.Velocity = moveDirection.Unit * 50 + Vector3.new(0, 0, 0)
    end
end

local function Unfly()
    flying = false
    if BodyGyro then BodyGyro:Destroy() end
    if BodyVelocity then BodyVelocity:Destroy() end
    LocalPlayer.Character.Humanoid.PlatformStand = false
    LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
end

local PlayerTab = Window:MakeTab({
    Name = "Player",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local playerList = {}
for _, player in ipairs(Players:GetPlayers()) do
    if player.Name ~= LocalPlayer.Name then
        table.insert(playerList, player.DisplayName)
    end
end

PlayerTab:AddDropdown({
    Name = "Goto",
    Options = playerList,
    Callback = function(selected)
        local targetPlayer = Players:FindFirstChild(selected)
        if targetPlayer and targetPlayer.Character then
            LocalPlayer.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
        end
    end
})

PlayerTab:AddButton({
    Name = "Goto Player",
    Callback = function()
        -- Callback handled in the dropdown
    end
})

PlayerTab:AddDropdown({
    Name = "View",
    Options = playerList,
    Callback = function(selected)
        local targetPlayer = Players:FindFirstChild(selected)
        if targetPlayer and targetPlayer.Character then
            workspace.CurrentCamera.CameraSubject = targetPlayer.Character.Humanoid
        end
    end
})

PlayerTab:AddToggle({
    Name = "View Player",
    Default = false,
    Callback = function(state)
        if state then
            local selectedPlayer = PlayerTab:GetDropdown("View").Selected
            local targetPlayer = Players:FindFirstChild(selectedPlayer)
            if targetPlayer and targetPlayer.Character then
                workspace.CurrentCamera.CameraSubject = targetPlayer.Character.Humanoid
            end
        else
            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character.Humanoid
        end
    end
})

PlayerTab:AddButton({
    Name = "Fly",
    Callback = function()
        if flying then
            Unfly()
        else
            Fly()
        end
    end
})

PlayerTab:AddToggle({
    Name = "Fling",
    Default = false,
    Callback = function(state)
        if state then
            LocalPlayer.Character.Humanoid.CollisionEnabled = false
            while state do
                LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.Angles(0, math.rad(4000), 0)
                wait()
            end
        else
            LocalPlayer.Character.Humanoid.CollisionEnabled = true
        end
    end
})

PlayerTab:AddTextbox({
    Name = "Spin",
    Default = "Enter spin speed",
    TextDisappear = "Enter spin speed",
    Callback = function(value)
        spinSpeed = tonumber(value)
    end
})

PlayerTab:AddButton({
    Name = "Start Spin",
    Callback = function()
        while spinSpeed and spinSpeed > 0 do
            LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.Angles(0, math.rad(spinSpeed), 0)
            wait()
        end
    end
})

PlayerTab:AddButton({
    Name = "Stop Spin",
    Callback = function()
        spinSpeed = 0
    end
})

PlayerTab:AddTextbox({
    Name = "Speed",
    Default = "Enter speed",
    TextDisappear = "Enter speed",
    Callback = function(value)
        LocalPlayer.Character.Humanoid.WalkSpeed = tonumber(value)
    end
})

PlayerTab:AddButton({
    Name = "Add Speed",
    Callback = function()
        LocalPlayer.Character.Humanoid.WalkSpeed = tonumber(SpeedTextbox.Text) or defaultWalkSpeed
    end
})

PlayerTab:AddTextbox({
    Name = "JumpPower",
    Default = "Enter Jump Power",
    TextDisappear = "Enter Jump Power",
    Callback = function(value)
        LocalPlayer.Character.Humanoid.JumpPower = tonumber(value)
    end
})

PlayerTab:AddButton({
    Name = "Add JumpPower",
    Callback = function()
        LocalPlayer.Character.Humanoid.JumpPower = tonumber(JumpPowerTextbox.Text) or defaultJumpPower
    end
})

PlayerTab:AddButton({
    Name = "Reset Speed And JumpPower",
    Callback = function()
        LocalPlayer.Character.Humanoid.WalkSpeed = defaultWalkSpeed
        LocalPlayer.Character.Humanoid.JumpPower = defaultJumpPower
    end
})

OrionLib:Init()
